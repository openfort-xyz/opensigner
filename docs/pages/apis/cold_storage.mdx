---
title: Cold Storage API
description: API reference for the OpenSigner Cold Storage, responsible for storing encrypted key shares accessed during recovery.
---

import Warning from './ui_warning.mdx'
import SwaggerViewer from '../../lib/swaggerviewer.tsx'

# Cold Storage API

<Warning />

<SwaggerViewer url="/swagger/cold_storage.yaml" />

## Errors

Shield API returns various error codes depending on the type of failure encountered. Each error response includes an HTTP status code, an error code, and a descriptive message.

### Error Response Format

```json
{
  "message": "Error description",
  "code": "ERROR_CODE"
}
```

### OTP Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 429 | `OTP_RATE_LIMIT` | Rate limit exceeded to generate OTP |
| 422 | `OTP_EXPIRED` | OTP is expired |
| 400 | `OTP_INVALIDATED` | OTP invalidated after max failed attempts |
| 400 | `OTP_INVALID` | Received otp is invalid |
| 400 | `OTP_REQUESTED_BUT_NOT_SENT` | OTP was requested but not sent |
| 428 | `OTP_MISSING` | OTP is required for this request |
| 404 | `OTP_RECORD_NOT_FOUND` | OTP record not found for user |
| 400 | `OTP_USER_INFO_MISSING` | Missing user information like email or phone number |
| 400 | `OTP_NOT_SUPPORTED` | Project doesn't support OTP |
| 409 | `OTP_ALREADY_ENABLED` | Project already has OTP enabled |

### Project Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 404 | `PJ_NOT_FOUND` | Project not found |
| 409 | `EC_EXISTS` | Encryption part already exists |
| 409 | `EC_MISSING` | The requested share have project entropy and encryption part is required |
| 400 | `EC_INVALID` | Invalid encryption part |
| 400 | `EC_INVALID` | Invalid encryption session |

### Share Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 404 | `SH_NOT_FOUND` | Share not found |
| 409 | `SH_EXISTS` | Share already exists |

### User Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 404 | `US_NOT_FOUND` | User not found |
| 404 | `US_EXT_NOT_FOUND` | External user not found |
| 409 | `US_EXT_EXISTS` | External user already exists |
| 400 | `USER_CONTACTS_MISMATCH` | User contact information mismatch |
| 400 | `EMAIL_INVALID` | Provided Email is invalid |
| 400 | `PHONE_INVALID` | Provided phone number is invalid |

### Provider Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 400 | `PV_UNKNOWN` | Unknown provider type |
| 400 | `PV_MISSING` | Missing provider |
| 404 | `PV_NOT_FOUND` | Provider not found |
| 400 | `PV_CFG_INVALID` | Invalid provider config |
| 400 | `PV_CFG_INVALID` | Missing key type |
| 400 | `PV_CFG_INVALID` | Invalid PEM certificate |
| 409 | `PV_CFG_INVALID` | JWK and PEM cannot be set at the same time |
| 409 | `PV_EXISTS` | Custom authentication already registered for this project |

### Authentication Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 401 | `A_MISSING` | Missing API key |
| 401 | `A_MISSING` | Missing API secret |
| 401 | `A_MISSING` | Missing token |
| 401 | `A_MISSING` | Missing auth provider |
| 401 | `A_INVALID` | Invalid API key or API secret |
| 401 | `A_INVALID` | Invalid token |
| 401 | `A_INVALID` | Invalid auth provider |

### General Errors

| HTTP Status | Error Code | Message |
|-------------|------------|---------|
| 500 | `INTERNAL` | Internal error |
| 500 | `MISSING_NOTIFICATION_SERV` | Missing notification service |
| 400 | `BAD_REQUEST` | Various messages |
